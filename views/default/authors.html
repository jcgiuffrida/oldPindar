{{extend 'layout.html'}}
{{if 'works' in locals():}}
<h3>Author</h3>
<div class="object">
<div>
{{for a in author:}}
{{=a.AUTHOR_TR.DisplayName}}
<br/>
{{=a.AUTHOR.YearBorn}} - {{=a.AUTHOR.YearDied}}
{{pass}}
</div>
<button class="button-edit">Edit Author</button>
<div class="edit">{{=crud.update(db.AUTHOR_TR, a.AUTHOR_TR.id)}}</div>
</div>
<br/>
<br/>

<h4>Works</h4>
{{for w in works:}}
<a href="/Pindar/default/works/{{=w.WORK_TR.id}}">
{{=w.WORK_TR.WorkName}}</a>
<br/>
{{pass}}
<br/>
<h4>Quotes</h4>
{{for q in quotes:}}
{{=q.QUOTE.Text}}&nbsp;(<a href="/Pindar/default/works/{{=q.WORK_TR.id}}">{{=q.WORK_TR.WorkName}}</a>)&nbsp;(<a href="/Pindar/default/quotes/{{=q.QUOTE.id}}">View Quote</a>)
<br/>
<br/>
{{pass}}

<hr>


{{else:}}
<h3>All Authors</h3>
{{for a in authors:}}
<a href="/Pindar/default/authors/{{=a.AUTHOR_TR.id}}">{{=a.AUTHOR_TR.DisplayName}}</a>
{{=a.AUTHOR.YearBorn}} - {{=a.AUTHOR.YearDied}}
<br/>
{{pass}}
{{pass}}
<br/>
<hr>
<script>
$(document).ready(function(){
	$('.edit').hide();
	$('.object').on('click', '.button-edit', function(){
		$(this).closest('.object').find('.edit').slideToggle();
	});
});
</script>
{{=response.toolbar()}}