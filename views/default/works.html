{{extend 'layout.html'}}
{{if 'work' in locals():}}
<h3>Work</h3>
<div class="object">
<div>
{{for w in work:}}
{{=w.WORK_TR.WorkName}}
<br/>
Published {{=w.WORK.YearPublished}}
{{pass}}
</div>
<br/>
<button class="button-edit">Edit Work</button>
<div class="edit">{{=crud.update(db.WORK_TR, w.WORK_TR.id)}}</div>
<br/>
</div>

<h4>Authors</h4>
{{for a in authors:}}
<a href="/Pindar/default/authors/{{=a.AUTHOR_TR.id}}">
{{=a.AUTHOR_TR.DisplayName}}</a>
<br/>
{{pass}}
<br/>
<h4>Quotes</h4>
{{for q in quotes:}}
{{=q.QUOTE.Text}}&nbsp;&nbsp;&nbsp;&nbsp;(<a href="/Pindar/default/quotes/{{=q.QUOTE.id}}">View Quote</a>)
<br/>
<br/>
{{pass}}
<hr>

{{else:}}
<h3>All Works</h3>
{{for w in works:}}
<a href="/Pindar/default/works/{{=w.WORK_TR.id}}">{{=w.WORK_TR.WorkName}}</a>
({{=w.AUTHOR_TR.DisplayName}}, {{=w.WORK.YearPublished}})
<br/>
{{pass}}
{{pass}}
<br/>
<hr>
<script>
$(document).ready(function(){
	$('.edit').hide();
	$('.object').on('click', '.button-edit', function(){
		$(this).closest('.object').find('.edit').slideToggle();
	});
});
</script>
{{=response.toolbar()}}